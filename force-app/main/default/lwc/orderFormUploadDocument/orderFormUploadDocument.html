<template>
    <div class="upload-section">
        <h2>Prescription</h2>
        <lightning-file-upload name="prescription" multiple accept=".pdf,.jpg,.jpeg,.png" record-id={orderFormId}
            data-attachmenttype="Prescription" onuploadfinished={handleUploadFinished}>
        </lightning-file-upload>
        <template if:true={prescriptionFiles}>
            <ul>
                <template for:each={prescriptionFiles} for:item="prescriptionFile">

                    <li key={fileName} class="slds-grid slds-m-top_medium slds-col slds-size_1-of-2">
                        <lightning-icon icon-name="doctype:image" class="slds-size_1-of-12"
                            alternative-text="Image file" title="Image"></lightning-icon>
                        <p class="slds-size_1-of-2 truncate">{prescriptionFile.Title}</p>
                        <lightning-button-icon icon-name="utility:delete" data-name={prescriptionFile.Title}
                            onclick={deleteFile} data-key={prescriptionFile.ContentDocumentId} data-type="Prescription"
                            class="delete-btn slds-m-left_xx-small slds-size_1-of-16"></lightning-button-icon>
                        <lightning-button label="Preview" variant="brand" data-id={prescriptionFile.ContentDocumentId} class="slds-m-left_xx-small slds-size_3-of-16"
                            onclick={previewHandler}></lightning-button>
                    </li>
                </template>
            </ul>
        </template>
    </div>
    <hr />

    <div class="upload-section">
        <h2>Waiver</h2>
        <lightning-file-upload name="discountDocument" multiple accept=".pdf,.jpg,.jpeg,.png" record-id={orderFormId}
            data-attachmenttype="Discount Document" onuploadfinished={handleUploadFinished}>
        </lightning-file-upload>

        <template if:true={discountFiles}>
            <ul>
                <template for:each={discountFiles} for:item="discountFile">

                    <li key={discountFile.Title} class="slds-grid slds-m-top_medium slds-col slds-size_1-of-2">
                        <lightning-icon icon-name="doctype:image" class="slds-size_1-of-12"
                            alternative-text="Image file" title="Image"></lightning-icon>
                        <p class="slds-size_1-of-2 truncate">{discountFile.Title}</p>
                        <lightning-button-icon icon-name="utility:delete" data-name={discountFile.Title}
                            onclick={deleteFile} data-key={discountFile.ContentDocumentId} data-type="Discount Document"
                            class="delete-btn slds-m-left_xx-small slds-size_1-of-16"></lightning-button-icon>
                            <lightning-button label="Preview" variant="brand" data-id={discountFile.ContentDocumentId} class="slds-m-left_xx-small slds-size_3-of-16"
                            onclick={previewHandler}></lightning-button>
                    </li>
                </template>
            </ul>
        </template>
    </div>
    <hr />

    <div class="upload-section">
        <h2>Tax Exemption Certificate</h2>
        <lightning-file-upload name="taxexemptioncertificate" multiple accept=".pdf,.jpg,.jpeg,.png"
            record-id={orderFormId} data-attachmenttype="Tax Exemption Certificate"
            onuploadfinished={handleUploadFinished}>
        </lightning-file-upload>

        <template if:true={taxExemptFiles}>
            <ul>
                <template for:each={taxExemptFiles} for:item="taxExemptFile">

                    <li key={taxExemptFile.Title} class="slds-grid slds-m-top_medium slds-col slds-size_1-of-2">
                        <lightning-icon icon-name="doctype:image" class="slds-size_1-of-12"
                            alternative-text="Image file" title="Image"></lightning-icon>
                        <p class="slds-size_1-of-2 truncate">{taxExemptFile.Title}</p>
                        <lightning-button-icon icon-name="utility:delete" data-name={taxExemptFile.Title}
                            onclick={deleteFile} data-key={taxExemptFile.ContentDocumentId}
                            data-type="Tax Exemption Certificate"
                            class="delete-btn slds-m-left_xx-small slds-size_1-of-16"></lightning-button-icon>
                            <lightning-button label="Preview" variant="brand" data-id={taxExemptFile.ContentDocumentId} class="slds-m-left_xx-small slds-size_3-of-16"
                            onclick={previewHandler}></lightning-button>
                    </li>
                </template>
            </ul>
        </template>
    </div>
</template>